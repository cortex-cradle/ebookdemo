<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Product Demo</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 50px; background-color: #f4f4f9; }
        .product-card { max-width: 400px; margin: 0 auto; padding: 30px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); background-color: #ffffff; }
        h1 { color: #333; }
        p { color: #666; margin-bottom: 30px; }
        .buy-button { background-color: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; text-decoration: none; font-size: 1.1em; }
        
        /* Modal (Popup) CSS */
        .modal {
            display: none; /* Default hidden */
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.7); 
            z-index: 1000; overflow: auto;
            align-items: center; justify-content: center;
        }
        .modal-content {
            background-color: #4CAF50; color: white; 
            margin: 15% auto; padding: 30px; 
            border-radius: 10px; width: 80%; max-width: 400px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: fadeIn 0.5s;
        }
        .download-button {
            display: inline-block; background-color: #fff; color: #4CAF50;
            padding: 12px 25px; margin-top: 20px;
            text-decoration: none; border-radius: 5px;
            font-weight: bold; font-size: 1.2em;
        }
        @keyframes fadeIn {
            from {opacity: 0;}
            to {opacity: 1;}
        }
    </style>
</head>
<body>

    <div class="product-card">
        <h1>ðŸš€ My Secret eBook (Demo)</h1>
        <p>Yeh eBook kharidne ke liye â‚¹99 ka bhugtan karein. Payment ke baad download link turant pop-up mein milega!</p>
        
        <button class="buy-button" onclick="alert('Demo: Payment Gateway open hoga. Payment successful hone par aapko niche diye gaye Hidden URL se wapas aana hoga.')">Buy Now (Cashfree)</button>
    </div>

    <div id="downloadModal" class="modal">
        <div class="modal-content">
            <h2>âœ… Success! Download Ready</h2>
            <p>Aapka payment safal ho gaya hai. Abhi download karein:</p>
            <a id="downloadButton" href="https://www.africau.edu/images/default/sample.pdf" class="download-button" target="_blank">Download Your eBook PDF</a>
            <p style="margin-top:15px; font-size:0.8em;">(Yeh link kewal ek baar kaam karega - Demo)</p>
        </div>
    </div>

<script>
    // --- ðŸ”‘ AAPKA SECRET KEY ---
    const REQUIRED_SECRET_KEY = 'MY_EBOOK_KEY_123'; 
    // Is key ko aap Cashfree ke Redirect URL mein use karenge!

    // Function to get query parameters from the URL
    function getUrlParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    // Check karein ki payment successful hai aur secret key match karta hai
    const paymentStatus = getUrlParam('payment_status');
    const secretKey = getUrlParam('secret_key');

    if (paymentStatus === 'success' && secretKey === REQUIRED_SECRET_KEY) {
        
        // 1. Download Popup ko dikhayein
        showDownloadPopup(); 
        
        // 2. ***MAGIC HIDING STEP***: URL se query parameters hatayein
        // Isse user ke browser mein sirf 'https://user.github.io/repo/index.html' dikhega
        // Aur woh 'secret_key' chhip jayega!
        history.replaceState(null, null, location.pathname); 

    } else if (paymentStatus === 'success' && secretKey !== REQUIRED_SECRET_KEY) {
        // Agar status 'success' hai par key galat hai toh kuch mat karo
        console.log("Payment success hua, lekin secret key galat hai. Download block kiya gaya.");
    }


    function showDownloadPopup() {
        // Modal ko display karein
        document.getElementById('downloadModal').style.display = 'flex';
    }
</script>

</body>
</html>
